### CSS 盒模型

标准盒模型：content  
IE 盒模型（怪异盒模型）：content+padding+border

<br>

### BFC

> 块格式化上下文（Block Formatting Context，BFC）针对的是 CSS 渲染过程中的块级盒子

计算 BFC 的高度时，需要计算浮动元素的高度  
BFC 区域不会与 float box 重叠  
BFC 是页面上的一个独立容器，子元素不会影响到外面  
计算 BFC 的高度时，浮动元素也会参与计算

会生成 BFC 的元素

1. float 不为 none 的元素
2. position 为 fixed 和 absolute 的元素
3. display 为 inline-block、table-cell、table-caption，flex，inline-flex 的元素
4. overflow 不为 visible 的元素

<br>

### 块级元素与行内元素

块元素：独占一行，并且有自动填满父元素，可以设置 margin 和 pading 以及高度和宽度
行元素：不会独占一行，width 和 height 会失效，并且在垂直方向的 padding 和 margin 失效

<br>

### visibility opacity display

opacity=0 元素透明度为 0，隐藏，仍占据布局空间，可以响应点击事件  
visibiliy=hidden 隐藏元素，仍占据布局空间，但无法响应点击事件  
display=none 完全隐藏，不占据任何空间，可视为元素被删除

<br>

### 外边距折叠

多个相邻 `（兄弟或者父子关系）` 普通流的块元素垂直方向 `marigin` 会重叠

折叠结果：

1. 两个相邻的外边距都是正数时，折叠结果是它们两者之间较大的值。
2. 两个相邻的外边距都是负数时，折叠结果是两者绝对值的较大值。
3. 两个外边距一正一负时，折叠结果是两者的相加的和

<br>

### 清除浮动

方法一：使用带 clear 属性的空元素  
`<div class="clear"></div>`，在 CSS 中赋予 `.clear{clear:both;}`

方法二：使用 CSS 的 overflow 属性  
给浮动元素的容器添加 `overflow:hidden;` 或 `overflow:auto;` 可以清除浮动

方法三：给浮动的元素的容器添加浮动

方法四：使用邻接元素处理  
给浮动元素后面的元素添加 clear 属性

<br>

### CSS 选择器优先级

> 参考文献：https://juejin.cn/post/6844903709772611592#comment

`!important > id 选择器 > 类选择器 > 伪元素选择器 > 伪类选择器`

内联样式 > 内部样式 > 外部样式 > 浏览器用户 > 自定义样式 > 浏览器默认样式

同一元素引用了多个样式时，排在后面的样式属性的优先级高  
标签之间存在层级包含关系时，后代元素会继承祖先元素的样式，继承的样式的优先级比较低

<br>

**优先级数值解析**

一个样式的优先级可以以一个三位数表示，默认优先级为 `0-0-0`

选择器中含 ID 选择器，百位+1  
选择器中含类选择器，十位+1  
选择器中含元素选择器，各位+1

最终比较三位数（不是把他们变成真正的三位数然后比较大小！譬如 1-0-0 永远比 0-9999-9999 大），由大到小排列，即可得到优先级顺序

> 某些伪类有可能会对优先级造成影响，譬如 :not()

<br>

**其余注意事项**

内联选择器优先于所有的普通样式

千万不要在内联样式内使用 `!important` ，这样外部无论如何都无法改变它！

<br>

### 回流与重绘

> 参考文献：https://juejin.cn/post/6844903779700047885#comment

#### 回流（reflow | layout）

回流在渲染树中的作用：根据生成的渲染树，进行回流(Layout)，得到节点的几何信息（位置，大小）

回流一定会触发重绘，而重绘不一定会回流

回流触发的条件

1. 添加或删除可见的 DOM 元素
2. 元素的位置发生变化
3. 元素的尺寸发生变化（包括外边距、内边框、边框大小、高度和宽度等）
4. 内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代。
5. 页面一开始渲染的时候（这肯定避免不了）
6. 浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）

<br>

#### 重绘（repaint）

重绘在渲染树中的作用：根据渲染树以及回流得到的几何信息，得到节点的绝对像素

当你获取布局信息的操作的时候，会强制队列刷新，此时即立刻触发回流重绘

避免使用诸如 scroll offset client 等会触发队列刷新的属性！

<br>

#### 减少回流与重绘的方法

方法一：合并多次对 DOM 和样式的修改，然后一次处理掉

方法二：将元素脱离文档流，除脱离文档流的一瞬间会触发重绘，后续无论我们如何修改该元素都不会触发重绘

方法三：对于复杂的动画，将其脱离文档流！

方法四：使用 CSS3 硬件加速，当使用 transform、opacity、filters 三大属性时会自动触发硬件加速，但 background-color 还是会重绘；避免多次触发硬件加速导致内存占用过大

<br>

### CSS 单位

| 单位 | 描述                                                                                                                       |
| ---- | -------------------------------------------------------------------------------------------------------------------------- |
| em   | 它是描述相对于应用在当前元素的字体尺寸，所以它也是相对长度单位。一般浏览器字体大小默认为 16px，则 2em == 32px；            |
| rem  | 是根 em（root em）的缩写，rem 作用于非根元素时，相对于根元素字体大小；rem 作用于根元素字体大小时，相对于其出初始字体大小。 |
| vh   | viewpoint height，视窗高度，1vh=视窗高度的 1%                                                                              |
| vw   | viewpoint width，视窗宽度，1vw=视窗宽度的 1%                                                                               |
| vmin | vw 和 vh 中较小的那个。                                                                                                    |
| vmax | vw 和 vh 中较大的那个。                                                                                                    |

% 相对父元素

<br>

| 单位 | 描述                                  |
| ---- | ------------------------------------- |
| cm   | 厘米                                  |
| mm   | 毫米                                  |
| in   | 英寸 (1in = 96px = 2.54cm)            |
| px   | 像素 (1px = 1/96th of 1in)            |
| pt   | point，大约 1/72 英寸；(1pt = 1/72in) |

<br>

### Position

`static`  
默认位置；默认为 0。元素将像往常一样流入页面。top，right，bottom，left 和 z-index 属性不适用。

`relative`  
元素的位置相对于自身进行了调整，而没有更改布局（因此，如果没有放置元素，将为元素留出一定的空隙）。

`absolute`  
元素从页面流中删除，并且相对于其最接近的祖先（如果有）或相对于初始包含块而定位在指定的位置。绝对定位的盒子可以有边距，并且不会与其他任何边距一起折叠。这些元素不会影响其他元素的位置。

`fixed`  
将元素从页面流中移除，并将其放置在相对于视口的指定位置，并且在滚动时不会移动。

`sticky`  
粘性定位是相对定位和固定定位的混合。将该元素视为相对位置，直到它超过指定的阈值为止，此时将其视为固定位置。

<br>

### 供应商前缀

供应商前缀可以为特定的浏览器指定样式

`-webkit-` （Chrome，Safari，Opera 的较新版本，几乎所有的 iOS 浏览器（包括 Firefox for iOS）；基本上是任何基于 WebKit 的浏览器）

`-moz-` （Firefox）

`-o-` （旧的，WebKit 之前的 Opera 版本）

`-ms-` （Internet Explorer 和 Microsoft Edge）

<br>

### 常见布局

> 建议参考掘金文章：https://juejin.cn/post/6844903574929932301#comment

<br>

### CSS3 伪类新增

:root 选择文档的根元素，等同于 html 元素

:empty 选择没有子元素的元素

:target 选取当前活动的目标元素

:not(selector) 选择除 selector 元素意外的元素

:enabled 选择可用的表单元素

:disabled 选择禁用的表单元素

:checked 选择被选中的表单元素

:nth-child(n) 匹配父元素下指定子元素，在所有子元素中排序第 n

nth-last-child(n) 匹配父元素下指定子元素，在所有子元素中排序第 n，从后向前数

:nth-child(odd)

:nth-child(even)

:nth-child(3n+1)

:first-child

:last-child

:only-child

:nth-of-type(n) 匹配父元素下指定子元素，在同类子元素中排序第 n

:nth-last-of-type(n) 匹配父元素下指定子元素，在同类子元素中排序第 n，从后向前数

:nth-of-type(odd)

:nth-of-type(even)

:nth-of-type(3n+1)

:first-of-type

:last-of-type

:only-of-type

::selection 选择被用户选取的元素部分（伪元素）

:first-line 选择元素中的第一行（伪元素）

:first-letter 选择元素中的第一个字符（伪元素）

:after 在元素在该元素之后添加内容（伪元素）

:before 在元素在该元素之前添加内容（伪元素）

<br>


